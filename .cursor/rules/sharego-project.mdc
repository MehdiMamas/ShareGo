---
description: ShareGo project overview, architecture invariants, and repo conventions
alwaysApply: true
---

# ShareGo project context

ShareGo is a serverless, end-to-end encrypted, local-network-only app for securely sharing sensitive data (passwords, OTPs, text) between exactly 2 devices on the same Wi-Fi.

## Supported platforms

- Desktop: Windows, macOS, Linux (Electron)
- Mobile: Android, iOS (React Native bare)
- Unified app in `apps/app/` using React Native + react-native-web

## Architecture invariants (never violate these)

1. No cloud servers, no TURN, no signaling, no relay
2. Same Wi-Fi / local network only
3. Exactly 2 participants per session, no late join
4. Receiver creates session, sender joins
5. All crypto uses libsodium — no platform-specific crypto APIs
6. Ephemeral keys only — never persist secrets to disk
7. QR and manual code are bootstrap only — never data channels
8. Bootstrap auto-regenerates every 10 seconds with fresh keys
9. Feature and UI parity between desktop and mobile — no exceptions

## Repo layout

- `core/src/crypto/` — libsodium wrappers (keygen, exchange, encrypt, decrypt)
- `core/src/protocol/` — message types, serialization, QR payload, binary DATA frames
- `core/src/session/` — XState state machine, SessionController, lifecycle, events
- `core/src/transport/` — ILocalTransport interface, WebSocketTransport
- `core/src/discovery/` — DiscoveryAdapter interface, mDNS + subnet fallback
- `core/src/types/` — branded types (SessionId, NetworkAddress, Base64PublicKey, etc.)
- `core/src/utils/` — legacy subnet discovery helpers (deprecated)
- `core/src/i18n/` — translation resources (en.ts — single source of truth for all user-facing text)
- `core/src/config.ts` — shared constants (timeouts, ports, limits — single source of truth)
- `apps/app/` — unified app (desktop + mobile)
- `apps/app/electron/` — Electron main process (ws-server, net-utils, mdns-adapter)
- `apps/app/src/` — React Native + react-native-web UI (screens, components, hooks, adapters)
- `scripts/` — setup, build, check, and dev convenience scripts
- `docs/` — ARCHITECTURE.md, PROTOCOL.md, THREAT_MODEL.md, REJECTED.md, BUILDING.md, CONTRIBUTING.md, IOS_GUIDE.md

## Key design rules

- All security logic lives in `@sharego/core` — app shells are thin wrappers
- Transport is pluggable via `ILocalTransport` interface
- Every message is typed via the `ProtocolMessage` union
- Session state transitions are governed by XState machine in `core/src/session/machine.ts`
- `SessionController` is the framework-agnostic session manager — hooks thin-wrap it
- All user-facing text comes from `core/src/i18n/en.ts` — never hardcode strings in app code
- All timing/config values come from `core/src/config.ts` — never hardcode values in app code
- Comments should be lowercase and only added when they explain *why*, not *what*
- Default branch is `main`
