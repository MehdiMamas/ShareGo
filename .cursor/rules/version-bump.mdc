---
description: version bump parity â€” all 6 version locations must be updated together
alwaysApply: true
---

# version bump rule

when bumping the project version, ALL 6 locations must be updated in the same commit. never bump one without the others.

## version locations (all must match)

| # | file | field |
|---|---|---|
| 1 | `package.json` (root) | `"version"` |
| 2 | `core/package.json` | `"version"` |
| 3 | `apps/desktop-tauri/package.json` | `"version"` |
| 4 | `apps/mobile-rn/package.json` | `"version"` |
| 5 | `apps/desktop-tauri/src-tauri/tauri.conf.json` | `"version"` |
| 6 | `apps/desktop-tauri/src-tauri/Cargo.toml` | `version = "x.y.z"` |

## process

1. determine the new version (semver: major.minor.patch)
2. update all 6 files
3. commit as `chore: bump version to x.y.z`
4. if a lockfile update is needed (new dependency added), run `npm install` and commit the lockfile BEFORE tagging
5. tag and push: `git tag vx.y.z && git push origin vx.y.z`

## common mistake to avoid

if you added a new npm dependency in the same release, run `npm install` to update `package-lock.json` BEFORE creating the version tag. CI uses `npm ci` which requires the lockfile to be in sync.
